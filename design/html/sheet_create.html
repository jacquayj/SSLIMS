<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">

	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />
	<meta name="description" content="">
	<meta name="author" content="">

	<title>Create Sheet :: SSLIMS</title>

	<link rel="stylesheet" type="text/css" href="css/glyphicons.css">
	<link rel="stylesheet" type="text/css" href="css/theme.css">
	<link rel="stylesheet" type="text/css" href="css/dashboard.css">
	<link rel="stylesheet" type="text/css" href="css/wellplate.css">

	<link rel="apple-touch-icon" href="images/touch-icon-ipad.png" />

</head>

<script type="text/javascript" src="js/jquery-2.0.3.min.js"></script>
<script type="text/javascript" src="js/underscore-min.js"></script>
<script type="text/javascript" src="js/backbone-min.js"></script>
<script type="text/javascript" src="js/sslims.lib.js"></script>
<script type="text/javascript" src="js/jquery.stayInWebApp.min.js"></script>

<script type="text/javascript">

$(function() {

	var sidebar = $("#sidebar");
	var page = $("#page");

	new UI.TabGroup($(".ui-tab-group"));

	if ( window.location.hash !== "#login" ) {
		if ( window.location.hash == "#welcome" ) {
			page.animate({
				"margin-left": "185px"
			}, 500);
		} else {
			page.css("margin-left", "185px");
		}
	
	}

	$("#expand").click(function() {
		if ( page.css('margin-left') == "185px" ) {
			page.animate({
				"margin-left": "0px"
			}, 500);
		} else {
			page.animate({
				"margin-left": "185px"
			}, 500);
		}
	});

	$("#logout").click(function() {
		$("#login").css({
			"border-right": "solid 10px #3b3a3f"
		});
		page.animate({
			"margin-left": "10px"
		}, 500, function() {
			$("#login").animate({
				left: "0%"
			}, 1000, function() {
				document.location = "login.html";
			});
		});
	});

	(function() {
		var drag_sample = $(".drag-sample");
		var is_dragging = false;
		var sample_index = 0;
		var old_well = false;


		var samples = [
			{
				id: "123",
				name: "Sample 1",
				ng: "0.12"
			}, {
				id: "124",
				name: "Sample 2",
				ng: "0.12"
			}, {
				id: "125",
				name: "Sample 3",
				ng: "0.12"
			}, {
				id: "126",
				name: "Sample 4",
				ng: "0.12"
			}, {
				id: "127",
				name: "Sample 5",
				ng: "0.12"
			}
		];

		for ( var n in samples ) {
			$(".table-container tbody").append("<tr class=\"sample\" sample-index=\"" + n + "\"><td>" + samples[n].id + "</td><td>" + samples[n].name + "</td><td>" + samples[n].id + "ug</td></tr>");
		}

		$(".well").click(function(e) {
			if ( e.target != this ) return;

			is_dragging = false;
			old_well = false;

			$(".well-info").hide();
			$(".well-info", $(this)).fadeToggle("fast");
		});

		$(".sample").on({'touchstart': function(e) {
			e.preventDefault();

			sample_index = parseInt($(this).attr("sample-index"));

			drag_sample.show();

			var x = e.originalEvent.changedTouches[0].pageX;
			var y = e.originalEvent.changedTouches[0].pageY;
			
			is_dragging = true;

			drag_sample.css({"left": (x - (drag_sample.width() / 2)) + "px", "top": (y - drag_sample.height()) + "px"});
			
		}});

		$(document).on({'touchend': function(e) {
			if ( is_dragging ) {
				is_dragging = false;
				drag_sample.hide();

				var w = $(window);

				var x = e.originalEvent.changedTouches[0].pageX;
				var y = e.originalEvent.changedTouches[0].pageY - (drag_sample.height() / 2);

				$(".well").each(function(index, element) {


					var top = $(element).offset().top - w.scrollTop();
					var left = $(element).offset().left - w.scrollLeft();
					
					if ( (top < y) && ((top + 30) > y) && (left < x) && ((left + 30) > x) ) {
						
						if ( $(element).hasClass("selected") ) {
							return false;
						}

						if ( old_well ) {
							old_well.removeClass("selected").off("touchstart");

							$(".well-info", old_well).remove();
							old_well = false;
						}

						var this_index = sample_index;

						$(".sample:eq(" + sample_index + ")").hide();
						
						$(this).addClass("selected");

						$(this).attr("sample-index", sample_index);

						$(this).append("<div class=\"well-info\"><span class=\"sample-name\">" + samples[sample_index].name + "</span><span class=\"field\">Sample:</span> " + samples[sample_index].id + "<br /><span class=\"field\">Order:</span> 5678<br><span class=\"field\">Concentration:</span> " + samples[sample_index].ng + "ng/ul<br><input class=\"well-info-remove btn-red\" type=\"button\" value=\"Remove\"><div class=\"well-info-triangle\"></div><a href=\"#\" class=\"well-info-close glyphicon glyphicon-remove\"></a></div>");

						$(this).on({'touchstart': function(e) {
							
							if ( e.target != this ) return;

							old_well = $(this);

							old_well.removeClass("selected");
							$(".well-info", old_well).hide();

							sample_index = parseInt($(this).attr("sample-index"));

							drag_sample.show();

							var x = e.originalEvent.changedTouches[0].pageX;
							var y = e.originalEvent.changedTouches[0].pageY;
							
							is_dragging = true;

							drag_sample.css({"left": (x - (drag_sample.width() / 2)) + "px", "top": (y - drag_sample.height()) + "px"});
							
						}});

						$(".well-info-close", $(this)).click(function() {
							$(this).parent().fadeOut("fast");
						});

						$(".well-info-remove", $(this)).click(function() {
							$(".sample:eq(" + this_index + ")").show();

							$(this).parent().parent().removeClass("selected").off("touchstart");

							$(this).parent().remove();
						});


						return false;

					}

				});
			
				if ( old_well ) {
					old_well.addClass("selected");
				}
				
			}
			
		}});

		$(document).on({'touchmove': function(e) {
			if ( is_dragging ) {
				
				e.preventDefault();

				var x = e.originalEvent.changedTouches[0].pageX;
				var y = e.originalEvent.changedTouches[0].pageY;

				drag_sample.css({"left": (x - (drag_sample.width() / 2)) + "px", "top": (y - drag_sample.height()) + "px"});
			}
		}});

	})();

	$.stayInWebApp();

});



</script>

<body>

	<div class="drag-sample"></div>

	<div id="sidebar">

		<a href="index.html">
			<img src="images/logo-small.png" id="logo" />
		</a>

		<div id="navigation">
			<h3>Requests</h3>

			<ul>
				<li>
					<a href="index.html">
						<span class="glyphicon glyphicon-bookmark"></span> Dashboard
					</a>
				</li>
				<li>
					<a href="request_view.html">
						<span class="glyphicon glyphicon-th-list"></span> View Requests
					</a>
				</li>
				<li>
					<a href="request_create.html">
						<span class="glyphicon glyphicon-plus"></span> Create Request
					</a>
				</li>
			</ul>

			<h3>Workflow</h3>
			<ul>
				<li>
					<a href="sample_checkin.html">
						<span class="glyphicon glyphicon-qrcode"></span> Check-in Sample
					</a>
				</li>
				<li>
					<a href="sheet_view.html">
						<span class="glyphicon glyphicon-th-list"></span> View Sheets
					</a>
				</li>
				<li class="selected">
					<a href="sheet_create.html">
						<span class="glyphicon glyphicon-flash"></span> Create Sheet
					</a>
				</li>
				<li>
					<a href="alert_send.html">
						<span class="glyphicon glyphicon-exclamation-sign"></span> Send Alerts
					</a>
				</li>
			</ul>


			<h3>Settings</h3>
			<ul>
				<li>
					<a href="alert_templates.html">
						<span class="glyphicon glyphicon-envelope"></span> Alert Templates
					</a>
				</li>
				<li>
					<a href="instrument_settings.html">
						<span class="glyphicon glyphicon-tasks"></span> Instruments
					</a>
				</li>
				<li>
					<a href="account_settings.html">
						<span class="glyphicon glyphicon-cog"></span> Accounts
					</a>
				</li>
			</ul>
			<div class="clear"></div>
		</div>

	</div>
	<div id="page">
		<div id="header">

			<a href="#">
				<img src="images/icon-expand.png" id="expand" />
			</a>

			<input type="text" id="site-search" class="search" placeholder="Search..." />

			<a href="#" class="glyphicon glyphicon-log-out" id="logout" title="Logout"></a>

			<div id="account">
				<a href="settings.html"><span class="glyphicon glyphicon-cog"></span> John Jacquay</a>
			</div>

			<ul id="bread">
				<li>/</li>
				<li><a href="index.html">Dashboard</a></li>
				<li>/</li>
				<li><a href="sheet_view.html">Sample Sheets</a></li>
				<li>/</li>
				<li><a href="sheet_create.html" class="selected">Create Sample Sheet</a></li>
				<li style="float:right;"><a href="#" class="glyphicon glyphicon-info-sign help-btn"></a></li>
			</ul>
		</div>

		<div id="container">
			<div id="content">
				<h2>Create Sample Sheet</h2>

				<div class="box" id="new-well-plate">
					<div class="ui-tab-group">

						<ul class="ui-tabs">
							<li class="selected"><a href="#">DNA Sample Sheet</a></li>
							<li><a href="#">Fragment Analysis Sample Sheet</a></li>
							<div class="clear"></div>
						</ul>



						<div class="ui-tab-content" style="display: block;">
							<h2>Samples Ready to Run</h2>

							<div class="well-plate">

								<div id="plate-container">
									<img id="plate-triangle" src="images/well-plate-triangle.png" />
									<div id="plate">
										<div class="well"><div class="well-label">1</div>
										
									</div>
										<div class="well"><div class="well-label">2</div></div>
										<div class="well"><div class="well-label">3</div></div>
										<div class="well"><div class="well-label">4</div></div>
										<div class="well"><div class="well-label">5</div></div>
										<div class="well"><div class="well-label">6</div></div>
										<div class="well"><div class="well-label">7</div></div>
										<div class="well"><div class="well-label">8</div></div>
										<div class="well"><div class="well-label">9</div></div>
										<div class="well"><div class="well-label">10</div></div>
										<div class="well"><div class="well-label">11</div></div>
										<div class="well"><div class="well-label">12</div></div>
										<div class="well"><div class="well-label">13</div></div>
										<div class="well"><div class="well-label">14</div></div>
										<div class="well"><div class="well-label">15</div></div>
										<div class="well"><div class="well-label">16</div></div>
										<div class="well"><div class="well-label">17</div></div>
										<div class="well"><div class="well-label">18</div></div>
										<div class="well"><div class="well-label">19</div></div>
										<div class="well"><div class="well-label">20</div></div>
										<div class="well"><div class="well-label">21</div></div>
										<div class="well"><div class="well-label">22</div></div>
										<div class="well"><div class="well-label">23</div></div>
										<div class="well"><div class="well-label">24</div></div>
										<div class="well"><div class="well-label">25</div></div>
										<div class="well"><div class="well-label">26</div></div>
										<div class="well"><div class="well-label">27</div></div>
										<div class="well"><div class="well-label">28</div></div>
										<div class="well"><div class="well-label">29</div></div>
										<div class="well"><div class="well-label">30</div></div>
										<div class="well"><div class="well-label">31</div></div>
										<div class="well"><div class="well-label">32</div></div>
										<div class="well"><div class="well-label">33</div></div>
										<div class="well"><div class="well-label">34</div></div>
										<div class="well"><div class="well-label">35</div></div>
										<div class="well"><div class="well-label">36</div></div>
										<div class="well"><div class="well-label">37</div></div>
										<div class="well"><div class="well-label">38</div></div>
										<div class="well"><div class="well-label">39</div></div>
										<div class="well"><div class="well-label">40</div></div>
										<div class="well"><div class="well-label">41</div></div>
										<div class="well"><div class="well-label">42</div></div>
										<div class="well"><div class="well-label">43</div></div>
										<div class="well"><div class="well-label">44</div></div>
										<div class="well"><div class="well-label">45</div></div>
										<div class="well"><div class="well-label">46</div></div>
										<div class="well"><div class="well-label">47</div></div>
										<div class="well"><div class="well-label">48</div></div>
										<div class="well"><div class="well-label">49</div></div>
										<div class="well"><div class="well-label">50</div></div>
										<div class="well"><div class="well-label">51</div></div>
										<div class="well"><div class="well-label">52</div></div>
										<div class="well"><div class="well-label">53</div></div>
										<div class="well"><div class="well-label">54</div></div>
										<div class="well"><div class="well-label">55</div></div>
										<div class="well"><div class="well-label">56</div></div>
										<div class="well"><div class="well-label">57</div></div>
										<div class="well"><div class="well-label">58</div></div>
										<div class="well"><div class="well-label">59</div></div>
										<div class="well"><div class="well-label">60</div></div>
										<div class="well"><div class="well-label">61</div></div>
										<div class="well"><div class="well-label">62</div></div>
										<div class="well"><div class="well-label">63</div></div>
										<div class="well"><div class="well-label">64</div></div>
										<div class="well"><div class="well-label">65</div></div>
										<div class="well"><div class="well-label">66</div></div>
										<div class="well"><div class="well-label">67</div></div>
										<div class="well"><div class="well-label">68</div></div>
										<div class="well"><div class="well-label">69</div></div>
										<div class="well"><div class="well-label">70</div></div>
										<div class="well"><div class="well-label">71</div></div>
										<div class="well"><div class="well-label">72</div></div>
										<div class="well"><div class="well-label">73</div></div>
										<div class="well"><div class="well-label">74</div></div>
										<div class="well"><div class="well-label">75</div></div>
										<div class="well"><div class="well-label">76</div></div>
										<div class="well"><div class="well-label">77</div></div>
										<div class="well"><div class="well-label">78</div></div>
										<div class="well"><div class="well-label">79</div></div>
										<div class="well"><div class="well-label">80</div></div>
										<div class="well"><div class="well-label">81</div></div>
										<div class="well"><div class="well-label">82</div></div>
										<div class="well"><div class="well-label">83</div></div>
										<div class="well"><div class="well-label">84</div></div>
										<div class="well"><div class="well-label">85</div></div>
										<div class="well"><div class="well-label">86</div></div>
										<div class="well"><div class="well-label">87</div></div>
										<div class="well"><div class="well-label">88</div></div>
										<div class="well"><div class="well-label">89</div></div>
										<div class="well"><div class="well-label">90</div></div>
										<div class="well"><div class="well-label">91</div></div>
										<div class="well"><div class="well-label">92</div></div>
										<div class="well"><div class="well-label">93</div></div>
										<div class="well"><div class="well-label">94</div></div>
										<div class="well"><div class="well-label">95</div></div>
										<div class="well"><div class="well-label">96</div></div>

										<div class="clear"></div>
									</div>
								</div>

							</div>

							<div>
								<div class="left well-autoload">
									<h2>Autoload Samples</h2>

									<form>
										<label>Loading Protocol</label>
										<select>
											<option>Vertical</option>
											<option>Horizontal</option>
										</select>

										<label>Starting Well Index</label>
										<input type="text" value="1" />

										<input type="button" value="Load Samples" />
										<input type="button" value="Reset Sheet" class="btn-red" />
									</form>

								</div>
								<div class="left well-samples">
									
									<div class="table-container">
										<table class="ui-table">
											<thead>
												<tr>
													<th>
														<a href="#"><span class="glyphicon glyphicon-chevron-up"></span> ID</a>
													</th>
													<th><a href="#">Name</a></th>
													<th><a href="#">ng/ul</a></th>
												</tr>
											</thead>
											<tbody></tbody>
										</table>
									</div>
								</div>
								<div class="clear"></div>
							</div>

						
						</div>

						<div class="ui-tab-content">
						</div>

					</div>

					<div id="info"></div>

				</div>

				<div class="clear"></div>

			</div>
			
		</div>

		<div id="footer">
			&copy; 2013 <a href="http://www.ufl.edu/">University of Florida</a> &amp; <a href="http://www.biotech.ufl.edu/">ICBR</a>

			<a href="#" id="alert-icon" class="glyphicon glyphicon-bullhorn"></a>
		</div>
	</div>

	<iframe id="login" src="login.html"></iframe>

</body>
</html>
